clustering {

  ip = "127.0.0.1"
  ip = ${?THIS_IP}

  port = 0
  port = ${?AKKA_SAMPLE_THIS_PORT}

  seed-host = "127.0.0.1"
  seed-host = ${?AKKA_SAMPLE_SEED_IP_1}

  seed-port = 2551
  seed-port = ${?AKKA_SAMPLE_SEED_PORT_1}

  name = AOTAkkaCluster
}

akka {
  actor {
    provider = cluster
    serializers {
          jackson-json = "akka.serialization.jackson.JacksonJsonSerializer"
          jackson-cbor = "akka.serialization.jackson.JacksonCborSerializer"
    }
    serialization-bindings {
          "com.app.akka.aot.actor.AOTicketActorHandler" = jackson-json
          "com.app.akka.aot.actor.AOTResultData" = jackson-json
          "com.app.akka.aot.actor.QueryTicket" = jackson-json
          "com.app.akka.aot.actor.AOTicketCurrentInfo" = jackson-json
          "com.app.akka.aot.actor.persistent.TicketEvent" = jackson-json
          "com.app.akka.aot.actor.persistent.SuccessEvent" = jackson-json
          "com.app.akka.aot.actor.persistent.FailureEvent" = jackson-json
          "com.app.akka.aot.actor.persistent.TicketState" = jackson-json
    }

  }
  coordinated-shutdown.exit-jvm = on
  remote {
    netty.tcp {
      hostname = ${clustering.ip}
      port = ${clustering.port}
      bind-hostname=0.0.0.0
    }
    artery {
      # enabled = on
      transport = tcp
      canonical.hostname = ${clustering.ip}
      canonical.port = ${clustering.port}
      bind.hostname=0.0.0.0
    }
  }

  cluster {
    # change 'akka.tcp' to 'akka' if artery is enabled
    seed-nodes = [
      "akka://"${clustering.name}"@"${clustering.seed-host}":"${clustering.seed-port}]

    # auto downing is NOT safe for production deployments.
    # you may want to use it during development, read more about it in the docs.
    auto-down-unreachable-after = 10s
  }

}

akka {
    persistence {
			journal {
				plugin = "akka-contrib-mongodb-persistence-journal"
				leveldb.native = false
			}
			snapshot-store {
				plugin = "akka-contrib-mongodb-persistence-snapshot"
			}
	}
}

akka.contrib.persistence.mongodb {
   mongo {
     mongouri = "mongodb://127.0.0.1:27017"
     database = "akka-persistence"
     journal-collection = "journal"
     journal-index = "journal_index"
     snaps-collection = "snapshots"
     snaps-index = "snaps_index"
     journal-write-concern = "Acknowledged"
   }
}
